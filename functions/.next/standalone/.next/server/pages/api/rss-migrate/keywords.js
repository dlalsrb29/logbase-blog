"use strict";(()=>{var e={};e.id=233,e.ids=[233],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3745:e=>{e.exports=import("firebase/app")},1492:e=>{e.exports=import("firebase/firestore")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},4701:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>c,routeModule:()=>u});var o=r(1802),a=r(7153),n=r(6249),i=r(9742),d=e([i]);i=(d.then?(await d)():d)[0];let c=(0,n.l)(i,"default"),l=(0,n.l)(i,"config"),u=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/rss-migrate/keywords",pathname:"/api/rss-migrate/keywords",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},4810:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{db:()=>c});var o=r(3745),a=r(1492),n=e([o,a]);[o,a]=n.then?(await n)():n;let i={apiKey:"AIzaSyA6kCmSqaBH5SUPb4PkHU1hwe0l5Ppqw2w",authDomain:"logbase-blog-83db6.firebaseapp.com",projectId:"logbase-blog-83db6",storageBucket:"logbase-blog-83db6.firebasestorage.app",messagingSenderId:"938632982963",appId:"1:938632982963:web:6159f776e4466bf74bdbc6"};console.log("\uD83D\uDD25 Firebase 설정 확인:",{projectId:i.projectId,apiKey:i.apiKey?.substring(0,10)+"...",authDomain:i.authDomain,hasApiKey:!!i.apiKey,hasProjectId:!!i.projectId});let d=0===(0,o.getApps)().length?(0,o.initializeApp)(i):(0,o.getApps)()[0],c=(0,a.getFirestore)(d);s()}catch(e){s(e)}})},9742:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>i});var o=r(4810),a=r(1492),n=e([o,a]);async function i(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),"OPTIONS"===e.method){t.status(200).end();return}if("GET"===e.method)try{let e=(0,a.collection)(o.db,"rss_items"),r=await (0,a.getDocs)(e),s=new Set;r.forEach(e=>{let t=e.data();t.blogName&&s.add(t.blogName)}),t.status(200).json({success:!0,data:Array.from(s).sort()})}catch(e){console.error("키워드 조회 에러:",e),t.status(500).json({success:!1,error:"키워드 조회 중 오류가 발생했습니다."})}else if("POST"===e.method)try{let{guid:r,matchedKeywords:s}=e.body;if(!r||!Array.isArray(s))return t.status(400).json({success:!1,error:"Invalid parameters"});console.log("Keywords API 호출:",{guid:r,matchedKeywords:s});let n=(0,a.collection)(o.db,"rss_items"),i=(0,a.query)(n,(0,a.where)("guid","==",r)),d=await (0,a.getDocs)(i);if(d.empty)return console.log("RSS 아이템을 찾을 수 없음:",r),t.status(404).json({success:!1,error:"RSS item not found"});let c=d.docs[0];await (0,a.updateDoc)(c.ref,{matchedKeywords:s,updatedAt:new Date}),console.log("키워드 업데이트 성공:",{guid:r,matchedKeywords:s}),t.status(200).json({success:!0,message:"Keywords updated successfully"})}catch(e){console.error("Keywords API 에러:",e),t.status(500).json({success:!1,error:"Internal server error"})}else t.setHeader("Allow",["GET","POST"]),t.status(405).end(`Method ${e.method} Not Allowed`)}[o,a]=n.then?(await n)():n,s()}catch(e){s(e)}})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=t(t.s=4701);module.exports=r})();