(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[169],{3883:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rss-feed",function(){return s(1397)}])},1397:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(5893),n=s(7294),l=s(9008),i=s.n(l),r=s(4611);function c(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[o,u]=(0,n.useState)("all"),[h,m]=(0,n.useState)(!1),[p,g]=(0,n.useState)(1),[j,x]=(0,n.useState)(10),[y,f]=(0,n.useState)(0),[S,v]=(0,n.useState)({}),[b,N]=(0,n.useState)({}),[w,C]=(0,n.useState)({}),[k,R]=(0,n.useState)({}),[T,E]=(0,n.useState)(""),[D,_]=(0,n.useState)("all"),[O,P]=(0,n.useState)(0),[K,L]=(0,n.useState)({}),[U,F]=(0,n.useState)({}),[J,A]=(0,n.useState)(!1),[M,I]=(0,n.useState)([]),[z,G]=(0,n.useState)(!1),[X,Z]=(0,n.useState)(""),[H,q]=(0,n.useState)(null),[B,Q]=(0,n.useState)(""),[V,W]=(0,n.useState)(null),[Y,$]=(0,n.useState)(null),[ee,et]=(0,n.useState)([]),[es,ea]=(0,n.useState)(!1),[en,el]=(0,n.useState)(!1),[ei,er]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[ec,ed]=(0,n.useState)(null),[eo,eu]=(0,n.useState)({name:"",url:"",type:"noncompetitor",status:"active"}),[eh,em]=(0,n.useState)(null),[ep,eg]=(0,n.useState)(null),[ej,ex]=(0,n.useState)(void 0),[ey,ef]=(0,n.useState)(0),eS=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;try{l(!0),d(null),console.log("\uD83D\uDD04 RSS 데이터 로딩 시작:",{blogName:e,page:s,pageSize:a,feedTypeParam:n,searchTextParam:i});let c=new URLSearchParams;e&&"all"!==e&&c.append("blogName",e),c.append("page",String(s)),c.append("pageSize",String(a)),n&&"all"!==n&&c.append("feedType",n),i&&c.append("searchText",i);let o="/api/rss-migrate?".concat(c);console.log("\uD83D\uDCE1 API 요청 URL:",o);let u=await fetch(o);if(console.log("\uD83D\uDCE1 API 응답 상태:",u.status,u.statusText),!u.ok)throw Error("HTTP error! status: ".concat(u.status));let h=await u.json();if(console.log("\uD83D\uDCE1 API 응답 데이터:",h),h.success){var r;t(h.data||[]),f(h.totalCount||0),ex(h.filteredCount),ef(h.totalPages||Math.ceil((h.filteredCount||h.totalCount)/a)),console.log("✅ RSS 데이터 로딩 완료:",{itemsCount:(null===(r=h.data)||void 0===r?void 0:r.length)||0,totalCount:h.totalCount||0,filteredCount:h.filteredCount})}else console.error("❌ API 응답 에러:",h.error),d(h.error||"데이터를 불러오는 중 오류가 발생했습니다.")}catch(e){console.error("❌ RSS 데이터 로딩 에러:",e),d("RSS 데이터를 불러오는 중 오류가 발생했습니다.")}finally{l(!1)}},ev=e=>{g(e),eS("all"===o?void 0:o,e,j,D,T)},eb=e=>{x(e),g(1),eS("all"===o?void 0:o,1,e,D,T)},eN=async t=>{var s;let a=null===(s=S[t])||void 0===s?void 0:s.trim();if(!a)return;let n=a.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(0===n.length)return;C(e=>({...e,[t]:!0}));let l=e.find(e=>e.guid===t),i=Array.from(new Set([...b[t]||(null==l?void 0:l.matchedKeywords)||[],...n]));try{let e=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:t,matchedKeywords:i})}),s=await e.json();s.success?(N(e=>({...e,[t]:i})),v(e=>({...e,[t]:""}))):alert("키워드 저장 실패: "+s.error)}catch(e){alert("키워드 저장 중 오류 발생")}finally{C(e=>({...e,[t]:!1}))}},ew=async(t,s)=>{if(!window.confirm('키워드 "'.concat(s,'"을(를) 삭제하시겠습니까?')))return;let a=e.find(e=>e.guid===t),n=(b[t]||(null==a?void 0:a.matchedKeywords)||[]).filter(e=>e!==s);C(e=>({...e,[t]:!0}));try{let e=await fetch("/api/rss-migrate/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:t,matchedKeywords:n})}),s=await e.json();s.success?N(e=>({...e,[t]:n})):alert("키워드 삭제 실패: "+s.error)}catch(e){alert("키워드 삭제 중 오류 발생")}finally{C(e=>({...e,[t]:!1}))}},eC=async e=>{if(window.confirm("이 글을 삭제하시겠습니까?")){R(t=>({...t,[e]:!0}));try{let s=await fetch("/api/rss-migrate/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e})}),a=await s.json();a.success?(t(t=>t.filter(t=>t.guid!==e)),N(t=>{let s={...t};return delete s[e],s})):alert("글 삭제 실패: "+a.error)}catch(e){alert("글 삭제 중 오류 발생")}finally{R(t=>({...t,[e]:!1}))}}},ek=e=>{_(e),g(1),eS(o,1,j,e,T)};(0,n.useEffect)(()=>{eS(o,1,j)},[]),Array.from(new Set(e.map(e=>e.blogName))).sort().filter(t=>{var s;let a=!T||t.toLowerCase().includes(T.toLowerCase());if("all"===D)return a;let n=(null===(s=e.find(e=>e.blogName===t))||void 0===s?void 0:s.feedType)===D;return a&&n});let eR=()=>{g(1),eS("all"===o?void 0:o,1,j,D,T)},eT=e=>{let t=new Date(e),s=t.toLocaleString("ko-KR",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),a=t.toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return"".concat(s," GMT / ").concat(a," KST")},eE=async()=>{try{G(!0);let e=await fetch("/api/keywords"),t=await e.json();t.success?I(t.keywords):W("키워드 목록을 불러올 수 없습니다.")}catch(e){W("키워드 목록을 불러오는 중 오류가 발생했습니다.")}finally{G(!1)}},eD=async()=>{if(!X.trim()){W("키워드를 입력해주세요.");return}try{G(!0),W(null);let e=await fetch("/api/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:X.trim()})}),t=await e.json();t.success?(I(t.keywords),Z(""),$("키워드가 추가되었습니다."),setTimeout(()=>$(null),3e3)):W(t.error)}catch(e){W("키워드 추가 중 오류가 발생했습니다.")}finally{G(!1)}},e_=e=>{q(e),Q(e)},eO=async()=>{if(!H||!B.trim()){W("키워드를 입력해주세요.");return}try{G(!0),W(null);let e=await fetch("/api/keywords",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldKeyword:H,newKeyword:B.trim()})}),t=await e.json();t.success?(I(t.keywords),q(null),Q(""),$("키워드가 수정되었습니다."),setTimeout(()=>$(null),3e3)):W(t.error)}catch(e){W("키워드 수정 중 오류가 발생했습니다.")}finally{G(!1)}},eP=async e=>{if(window.confirm('키워드 "'.concat(e,'"을(를) 삭제하시겠습니까?')))try{G(!0),W(null);let t=await fetch("/api/keywords",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e})}),s=await t.json();s.success?(I(s.keywords),$("키워드가 삭제되었습니다."),setTimeout(()=>$(null),3e3)):W(s.error)}catch(e){W("키워드 삭제 중 오류가 발생했습니다.")}finally{G(!1)}};(0,n.useEffect)(()=>{J&&eE()},[J]);let eK=async()=>{ea(!0);try{let e=await fetch("/api/feeds"),t=await e.json();t.success?et(t.feeds):em(t.error||"RSS 피드를 불러오는 중 오류가 발생했습니다.")}catch(e){em("RSS 피드를 불러오는 중 오류가 발생했습니다.")}finally{ea(!1)}},eL=async()=>{if(!ei.name.trim()||!ei.url.trim()){em("피드 이름과 URL을 입력해주세요.");return}ea(!0),em(null),eg(null);try{let e=await fetch("/api/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ei)}),t=await e.json();t.success?(et(t.feeds),eg("RSS 피드가 추가되었습니다."),er({name:"",url:"",type:"noncompetitor",status:"active"})):em(t.error||"RSS 피드 추가 중 오류가 발생했습니다.")}catch(e){em("RSS 피드 추가 중 오류가 발생했습니다.")}finally{ea(!1)}},eU=e=>{ed(e),eu({...e})},eF=async()=>{if(!eo.name.trim()||!eo.url.trim()){em("피드 이름과 URL을 입력해주세요.");return}ea(!0),em(null),eg(null);try{let e=await fetch("/api/feeds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:ec.name,...eo})}),t=await e.json();t.success?(et(t.feeds),eg("RSS 피드가 수정되었습니다."),ed(null),eu({name:"",url:"",type:"noncompetitor",status:"active"})):em(t.error||"RSS 피드 수정 중 오류가 발생했습니다.")}catch(e){em("RSS 피드 수정 중 오류가 발생했습니다.")}finally{ea(!1)}},eJ=async e=>{if(window.confirm('RSS 피드 "'.concat(e.name,'"을(를) 삭제하시겠습니까?'))){ea(!0),em(null),eg(null);try{let t=await fetch("/api/feeds",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name})}),s=await t.json();s.success?(et(s.feeds),eg("RSS 피드가 삭제되었습니다.")):em(s.error||"RSS 피드 삭제 중 오류가 발생했습니다.")}catch(e){em("RSS 피드 삭제 중 오류가 발생했습니다.")}finally{ea(!1)}}};return(0,n.useEffect)(()=>{en&&eK()},[en]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"RSS 피드 - ".concat(r.j)}),(0,a.jsx)("meta",{name:"description",content:"RSS 피드 관리 및 뉴스레터 서비스"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,a.jsxs)("div",{className:"rss-feed-container",children:[(0,a.jsxs)("div",{className:"rss-header",children:[(0,a.jsx)("h1",{children:"RSS Feed Collection"}),(0,a.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,a.jsx)("input",{type:"text",value:T,onChange:e=>E(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eR()},placeholder:"블로그명, 제목, 내용 검색",className:"blog-search-input"}),(0,a.jsxs)("select",{value:D,onChange:e=>ek(e.target.value),className:"blog-filter",children:[(0,a.jsx)("option",{value:"all",children:"전체"}),(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsx)("button",{type:"button",onClick:eR,className:"migrate-btn",children:"검색"})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"rss-controls",style:{justifyContent:"center"},children:[(0,a.jsx)("button",{type:"button",onClick:()=>A(!J),className:"migrate-btn",style:{background:J?"#ef4444":"#10b981"},children:J?"RSS 수집 키워드 관리 닫기":"RSS 수집 키워드 관리"}),(0,a.jsx)("button",{type:"button",onClick:()=>el(!en),className:"migrate-btn",style:{background:en?"#ef4444":"#3b82f6"},children:en?"RSS FEED URL 관리 닫기":"RSS FEED URL 관리"})]})]}),J&&(0,a.jsxs)("div",{className:"keyword-manager-section",children:[(0,a.jsxs)("div",{className:"keyword-manager-header",children:[(0,a.jsx)("h3",{children:"RSS 수집용 키워드 관리"}),(0,a.jsx)("button",{onClick:()=>A(!1),className:"close-btn",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"info-box",children:[(0,a.jsx)("strong",{children:"설명:"})," 이 키워드들은 RSS 피드 수집 시 필터링에 사용됩니다. 경쟁사 블로그의 모든 글은 자동으로 수집되고, 비경쟁사 블로그는 이 키워드가 포함된 글만 수집됩니다."]}),V&&(0,a.jsx)("div",{className:"error-message",children:V}),Y&&(0,a.jsx)("div",{className:"success-message",children:Y}),(0,a.jsxs)("div",{className:"add-keyword-section",children:[(0,a.jsx)("h4",{children:"새 키워드 추가"}),(0,a.jsxs)("div",{className:"keyword-input-group",children:[(0,a.jsx)("input",{type:"text",value:X,onChange:e=>Z(e.target.value),onKeyDown:e=>"Enter"===e.key&&eD(),placeholder:"새 키워드를 입력하세요",disabled:z}),(0,a.jsx)("button",{onClick:eD,disabled:z||!X.trim(),className:"add-btn",children:z?"추가 중...":"추가"})]})]}),(0,a.jsxs)("div",{className:"keyword-list-section",children:[(0,a.jsxs)("h4",{children:["현재 키워드 목록 (",M.length,"개)"]}),z&&0===M.length?(0,a.jsx)("div",{className:"loading-message",children:"키워드를 불러오는 중..."}):0===M.length?(0,a.jsx)("div",{className:"empty-message",children:"등록된 키워드가 없습니다."}):(0,a.jsx)("div",{className:"keyword-grid",children:M.map((e,t)=>(0,a.jsx)("div",{className:"keyword-item",children:H===e?(0,a.jsxs)("div",{className:"keyword-edit-group",children:[(0,a.jsx)("input",{type:"text",value:B,onChange:e=>Q(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eO(),"Escape"===e.key&&(q(null),Q(""))},autoFocus:!0}),(0,a.jsx)("button",{onClick:eO,disabled:z,className:"save-btn",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{q(null),Q("")},disabled:z,className:"cancel-btn",children:"취소"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"keyword-text",children:e}),(0,a.jsxs)("div",{className:"keyword-actions",children:[(0,a.jsx)("button",{onClick:()=>e_(e),disabled:z,className:"edit-btn",children:"수정"}),(0,a.jsx)("button",{onClick:()=>eP(e),disabled:z,className:"delete-btn",children:"삭제"})]})]})},t))})]})]}),en&&(0,a.jsxs)("div",{className:"feed-manager-section",children:[(0,a.jsxs)("div",{className:"feed-manager-header",children:[(0,a.jsx)("h3",{children:"RSS 피드 관리"}),(0,a.jsx)("button",{onClick:()=>el(!1),className:"close-btn",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"info-box",children:[(0,a.jsx)("strong",{children:"설명:"})," RSS 피드를 추가, 수정, 삭제할 수 있습니다. 경쟁사 피드는 키워드 필터 없이 모든 글을 수집하고, 비경쟁사 피드는 키워드가 포함된 글만 수집합니다."]}),eh&&(0,a.jsx)("div",{className:"error-message",children:eh}),ep&&(0,a.jsx)("div",{className:"success-message",children:ep}),(0,a.jsxs)("div",{className:"add-feed-section",children:[(0,a.jsx)("h4",{children:"새 RSS 피드 추가"}),(0,a.jsxs)("div",{className:"feed-input-group",children:[(0,a.jsxs)("div",{className:"feed-input-row",children:[(0,a.jsx)("input",{type:"text",value:ei.name,onChange:e=>er({...ei,name:e.target.value}),placeholder:"피드 이름",disabled:es}),(0,a.jsx)("input",{type:"text",value:ei.url,onChange:e=>er({...ei,url:e.target.value}),placeholder:"RSS URL",disabled:es})]}),(0,a.jsxs)("div",{className:"feed-input-row",children:[(0,a.jsxs)("select",{value:ei.type,onChange:e=>er({...ei,type:e.target.value}),disabled:es,children:[(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsxs)("select",{value:ei.status,onChange:e=>er({...ei,status:e.target.value}),disabled:es,children:[(0,a.jsx)("option",{value:"active",children:"활성"}),(0,a.jsx)("option",{value:"error",children:"에러"})]}),(0,a.jsx)("button",{onClick:eL,disabled:es||!ei.name.trim()||!ei.url.trim(),className:"add-btn",children:es?"추가 중...":"추가"})]})]})]}),(0,a.jsxs)("div",{className:"feed-list-section",children:[(0,a.jsxs)("h4",{children:["현재 RSS 피드 목록 (",ee.length,"개)"]}),es&&0===ee.length?(0,a.jsx)("div",{className:"loading-message",children:"RSS 피드를 불러오는 중..."}):0===ee.length?(0,a.jsx)("div",{className:"empty-message",children:"등록된 RSS 피드가 없습니다."}):(0,a.jsx)("div",{className:"feed-grid",children:ee.map((e,t)=>(0,a.jsx)("div",{className:"feed-item",children:(null==ec?void 0:ec.name)===e.name?(0,a.jsxs)("div",{className:"feed-edit-group",children:[(0,a.jsxs)("div",{className:"feed-edit-row",children:[(0,a.jsx)("input",{type:"text",value:eo.name,onChange:e=>eu({...eo,name:e.target.value}),placeholder:"이름"}),(0,a.jsx)("input",{type:"text",value:eo.url,onChange:e=>eu({...eo,url:e.target.value}),placeholder:"URL"})]}),(0,a.jsxs)("div",{className:"feed-edit-row",children:[(0,a.jsxs)("select",{value:eo.type,onChange:e=>eu({...eo,type:e.target.value}),children:[(0,a.jsx)("option",{value:"competitor",children:"경쟁사"}),(0,a.jsx)("option",{value:"noncompetitor",children:"비경쟁사"})]}),(0,a.jsxs)("select",{value:eo.status,onChange:e=>eu({...eo,status:e.target.value}),children:[(0,a.jsx)("option",{value:"active",children:"활성"}),(0,a.jsx)("option",{value:"error",children:"에러"})]}),(0,a.jsx)("button",{onClick:eF,disabled:es,className:"save-btn",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{ed(null),eu({name:"",url:"",type:"noncompetitor",status:"active"})},disabled:es,className:"cancel-btn",children:"취소"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"feed-info",children:[(0,a.jsx)("div",{className:"feed-name",children:e.name}),(0,a.jsx)("div",{className:"feed-url",children:e.url}),(0,a.jsxs)("div",{className:"feed-tags",children:[(0,a.jsx)("span",{className:"feed-type-tag ".concat(e.type),children:"competitor"===e.type?"경쟁":"비경쟁"}),(0,a.jsx)("span",{className:"feed-status-tag ".concat(e.status),children:"active"===e.status?"활성":"에러"})]})]}),(0,a.jsxs)("div",{className:"feed-actions",children:[(0,a.jsx)("button",{onClick:()=>eU(e),disabled:es,className:"edit-btn",children:"수정"}),(0,a.jsx)("button",{onClick:()=>eJ(e),disabled:es,className:"delete-btn",children:"삭제"})]})]})},t))})]})]}),s&&(0,a.jsx)("div",{className:"loading",children:(0,a.jsx)("p",{children:"RSS 데이터를 불러오는 중..."})}),c&&(0,a.jsx)("div",{className:"error",children:(0,a.jsxs)("p",{children:["오류: ",c]})}),!s&&!c&&(0,a.jsxs)("div",{className:"rss-content",children:[(0,a.jsxs)("div",{className:"info-banner",style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",margin:"16px 0",fontSize:"14px"},children:[(0,a.jsx)("strong",{children:"\uD83D\uDCC5 RSS 수집 정보:"})," 매일 오전 6시(한국시간)에 ",(0,a.jsx)("strong",{children:"전일 작성된 글"}),"을 자동 수집합니다. 작성일은 ",(0,a.jsx)("strong",{children:"GMT(원본 시간) / KST(한국시간)"})," 순으로 표시됩니다."]}),(0,a.jsxs)("div",{className:"stats",children:[(0,a.jsxs)("p",{children:["all"!==D&&(0,a.jsx)(a.Fragment,{children:"competitor"===D?"경쟁사에서 ":"비경쟁사에서 "}),T?'"'.concat(T,'"로 검색한 결과 총 ').concat(null!=ej?ej:y,"개의 RSS 아이템"):"총 ".concat(null!=ej?ej:y,"개의 RSS 아이템"),"(페이지 ",p," / ",ey,")"]}),(0,a.jsxs)("select",{value:j,onChange:e=>eb(Number(e.target.value)),className:"page-size-select",children:[(0,a.jsx)("option",{value:10,children:"10개씩 보기"}),(0,a.jsx)("option",{value:20,children:"20개씩 보기"}),(0,a.jsx)("option",{value:30,children:"30개씩 보기"})]})]}),(0,a.jsx)("div",{className:"rss-grid",children:e.map((e,s)=>{let n=b[e.guid]||e.matchedKeywords,l=(ej||y)-(p-1)*j-s;return(0,a.jsxs)("article",{className:"rss-item",children:[(0,a.jsxs)("div",{className:"rss-meta",children:[(0,a.jsxs)("span",{className:"item-number",children:["#",l]}),(0,a.jsx)("span",{className:"blog-name",children:e.blogName}),(0,a.jsx)("span",{className:"feed-type",children:e.feedType}),(0,a.jsxs)("span",{className:"date",children:[e.author?"".concat(e.author," / "):"",eT(e.isoDate)]})]}),(0,a.jsx)("h3",{className:"rss-title",children:(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.title})}),(0,a.jsx)("p",{className:"rss-description",children:e.description?(0,a.jsxs)(a.Fragment,{children:[e.description.replace(/<[^>]*>/g,"").slice(0,200),e.description.replace(/<[^>]*>/g,"").length>200&&"..."]}):"설명이 없습니다."}),n.length>0&&(0,a.jsxs)("div",{className:"keywords",children:[(0,a.jsx)("strong",{children:"키워드:"})," ",n.map((t,s)=>(0,a.jsxs)("span",{className:"keyword-tag",children:[t,(0,a.jsx)("button",{type:"button",onClick:()=>ew(e.guid,t),className:"keyword-delete-btn",disabled:!!w[e.guid],"aria-label":"키워드 ".concat(t," 삭제"),children:"\xd7"})]},t))]}),(0,a.jsxs)("div",{className:"keyword-input-row",children:[(0,a.jsx)("input",{type:"text",value:S[e.guid]||"",onChange:t=>v(s=>({...s,[e.guid]:t.target.value})),placeholder:"키워드 입력 (쉼표로 구분)",disabled:!!w[e.guid]}),(0,a.jsx)("button",{type:"button",onClick:()=>eN(e.guid),className:"add-keyword-btn",disabled:!!w[e.guid],children:w[e.guid]?"저장중...":"추가"}),(0,a.jsx)("button",{type:"button",onClick:()=>eC(e.guid),className:"delete-item-btn",disabled:!!k[e.guid],children:k[e.guid]?"삭제중...":"글삭제"})]}),(0,a.jsxs)("div",{className:"newsletter-date-row",children:[(0,a.jsx)("label",{htmlFor:"newsletter-date-".concat(e.guid),children:"뉴스레터 발송일:"}),(0,a.jsx)("input",{type:"date",id:"newsletter-date-".concat(e.guid),value:K[e.guid]||e.news_letter_sent_date||"",onChange:t=>L(s=>({...s,[e.guid]:t.target.value}))}),(0,a.jsx)("button",{type:"button",onClick:async()=>{if(K[e.guid]){F(t=>({...t,[e.guid]:!0}));try{let s=await fetch("/api/rss-migrate/newsletter-date",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guid:e.guid,news_letter_sent_date:K[e.guid]})}),a=await s.json();a.success?(t(t=>t.map(t=>t.guid===e.guid?{...t,news_letter_sent_date:K[e.guid]}:t)),alert("뉴스레터 발송일이 저장되었습니다.")):alert("뉴스레터 발송일 저장 실패: "+(a.error||a.message))}catch(e){alert("뉴스레터 발송일 저장 중 오류 발생")}finally{F(t=>({...t,[e.guid]:!1}))}}},className:"save-newsletter-btn",disabled:!K[e.guid]||!!U[e.guid],children:U[e.guid]?"저장중...":"저장"})]})]},"".concat(e.guid,"-").concat(s))})}),(0,a.jsxs)("div",{className:"pagination",children:[(0,a.jsx)("button",{onClick:()=>ev(p-1),disabled:1===p,children:"이전"}),(()=>{let e=[],t=p>3,s=p<ey-2;1===p?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:1},1)):e.push((0,a.jsx)("button",{onClick:()=>ev(1),children:1},1)),t&&e.push((0,a.jsx)("span",{children:"..."},"left-ellipsis"));let n=Math.max(p-2,2),l=Math.min(p+2,ey-1);for(let t=n;t<=l;t++)1!==t&&t!==ey&&(t===p?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:t},t)):e.push((0,a.jsx)("button",{onClick:()=>ev(t),children:t},t)));return s&&e.push((0,a.jsx)("span",{children:"..."},"right-ellipsis")),1!==ey&&(ey===p?e.push((0,a.jsx)("button",{className:"active-page",disabled:!0,children:ey},ey)):e.push((0,a.jsx)("button",{onClick:()=>ev(ey),children:ey},ey))),e})(),(0,a.jsx)("button",{onClick:()=>ev(p+1),disabled:p===ey,children:"다음"})]})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3883)}),_N_E=e.O()}]);